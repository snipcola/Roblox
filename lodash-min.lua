local _={}if type(table.pack)~='function'then function table.pack(...)return{n=select("#",...),...}end end;if type(table.unpack)~='function'then table.unpack=unpack end;_.chunk=function(b,c)local d={}local c=c==0 and 1 or c or 1;local e,f=1,1;while true do d[f]={}for g=1,c do _.push(d[f],b[e])e=e+1 end;if _.gt(e,#b)then break end;f=f+1 end;return d end;_.compact=function(b)local d={}for h,i in pairs(b)do if i then _.push(d,i)end end;return d end;_.difference=function(b,...)local d={}local e=1;local j=false;local k=_.table(...)for h,i in pairs(b)do repeat while not _.isNil(k[e])and not j do for g,l in pairs(k[e])do if i==l then j=true end end;if not j then e=e+1 end end;if j then j=false;e=1;break end;_.push(d,i)e=1 until true end;return d end;_.drop=function(b,m)local m=m or 1;return _.slice(b,m+1)end;local n=function(o,p,...)local q;local o=o or _.identity;if p then q=o(p,...)else q=o(...)end;return q end;_.dropRight=function(b,m)local m=m or 1;return _.slice(b,nil,#b-m)end;local r=function(b,o,p,s,t,u)local d={}local e=s;while not _.isNil(b[e])do repeat if#d==0 and n(o,p,b[e],e,b)then e=e+t;break end;if u then _.enqueue(d,b[e])else _.push(d,b[e])end;e=e+t until true end;return d end;_.dropRightWhile=function(b,o,p)return r(b,o,p,#b,-1,true)end;_.dropWhile=function(b,o,p)return r(b,o,p,1,1)end;_.enqueue=function(b,v)return table.insert(b,1,v)end;_.fill=function(b,v,s,w)local s=s or 1;local w=w or#b;for f=s,w,s>w and-1 or 1 do b[f]=v end;return b end;local x=function(b,o,p,s,t)local e=s;while not _.isNil(b[e])do if n(o,p,b[e],e,b)then return e end;e=e+t end;return-1 end;_.findIndex=function(b,o,p)return x(b,o,p,1,1)end;_.findLastIndex=function(b,o,p)return x(b,o,p,#b,-1)end;_.first=function(b)return b[1]end;_.flatten=function(b,y)local d={}for h,i in pairs(b)do if _.isTable(i)then local z;if y then z=_.flatten(i)else z=i end;for A,l in pairs(z)do _.push(d,l)end else _.push(d,i)end end;return d end;_.flattenDeep=function(b)return _.flatten(b,true)end;_.indexOf=function(b,v,B)return _.findIndex(b,function(m)return m==v end)end;_.initial=function(b)return _.slice(b,nil,#b-1)end;_.intersection=function(...)local k=_.table(...)local C=table.remove(k,1)local d={}for f,i in pairs(C)do local D=false;for E,l in pairs(k)do if _.indexOf(l,i)==-1 then D=true;break end end;if not D then _.push(d,i)end end;return d end;_.last=function(b)return b[#b]end;_.lastIndexOf=function(b,v,B)return _.findLastIndex(b,function(m)return m==v end)end;_.pull=function(b,...)local f=1;local j=false;while not _.isNil(b[f])do repeat for h,i in pairs(_.table(...))do if b[f]==i then table.remove(b,f)j=true end end;if j then j=false;break end;f=f+1 until true end;return b end;_.push=function(b,v)return table.insert(b,v)end;_.pullAt=function(b,...)local d={}local k=_.table(...)table.sort(k,function(F,G)return _.gt(F,G)end)for f,H in pairs(k)do _.enqueue(d,table.remove(b,H))end;return d end;_.remove=function(b,o)local d={}local e=1;local o=o or _.identity;while not _.isNil(b[e])do repeat if o(b[e],e,b)then _.push(d,table.remove(b,e))break end;e=e+1 until true end;return d end;_.rest=function(b)return _.slice(b,2,#b)end;_.reverse=function(b)local d={}for f,i in pairs(b)do _.enqueue(d,i)end;return d end;_.slice=function(b,s,w)local s=s or 1;local w=w or#b;local d={}for f=s,w do d[f-s+1]=b[f]end;return d end;_.take=function(b,m)local m=m or 1;return _.slice(b,1,m)end;_.takeRight=function(b,m)local m=m or 1;return _.slice(b,#b-m+1)end;local I=function(b,o,p,s,t,u)local d={}local e=s;while not _.isNil(b[e])do if n(o,p,b[e],e,b)then if u then _.enqueue(d,b[e])else _.push(d,b[e])end else break end;e=e+t end;return d end;_.takeRightWhile=function(b,o,p)return I(b,o,p,#b,-1,true)end;_.union=function(...)local k=_.table(...)local d={}for f,b in pairs(k)do for E,i in pairs(b)do if _.indexOf(d,i)==-1 then _.push(d,i)end end end;return d end;_.takeWhile=function(b,o,p)return I(b,o,p,1,1)end;_.uniq=function(b,J,p)local d={}local K={}for h,i in pairs(b)do local L=n(J,p,i,h,b)if _.indexOf(K,L)==-1 then _.push(d,i)end;_.push(K,L)end;return d end;_.zipObject=function(...)local k=_.table(...)local d={}if#k==1 then for f,M in pairs(k[1])do d[M[1]]=M[2]end else for f=1,#k[1]do d[k[1][f]]=k[2][f]end end;return d end;_.unzip=function(b)return _.zip(_.args(b))end;_.without=function(b,...)local d={}for f,i in pairs(b)do local N=_.table(...)if _.indexOf(N,i)==-1 then _.push(d,i)end end;return d end;_.zip=function(...)local d={}for f,b in pairs(_.table(...))do for g,i in pairs(b)do d[g]=d[g]or{}d[g][f]=i end end;return d end;_.at=function(O,...)local d={}for h,P in pairs(_.table(...))do if _.isTable(P)then for h,P in pairs(P)do _.push(d,O[P])end else _.push(d,O[P])end end;return d end;_.countBy=function(O,J,p)local d={}for h,i in _.iter(O)do local L=_.str(n(J,p,i,h,O))if _.isNil(d[L])then d[L]=1 else d[L]=d[L]+1 end end;return d end;_.groupBy=function(O,J,p)local d={}for h,i in _.iter(O)do local L=_.str(n(J,p,i,h,O))if _.isNil(d[L])then d[L]={i}else _.push(d[L],i)end end;return d end;_.indexBy=function(O,J,p)local d={}for h,i in _.iter(O)do local L=_.str(n(J,p,i,h,O))d[L]=i end;return d end;_.every=function(O,o,p)for h,i in _.iter(O)do if not n(o,p,i,h,O)then return false end end;return true end;local Q=function(O,o,p,R)local d={}for h,i in _.iter(O)do local S=n(o,p,i,h,O)if R then if not S then _.push(d,i)end else if S then _.push(d,i)end end end;return d end;_.filter=function(O,o,p)return Q(O,o,p)end;_.forEach=function(O,o,p)for h,i in _.iter(O)do n(o,p,i,h,O)end;return O end;_.forEachRight=function(O,o,p)for h,i in _.iterRight(O)do n(o,p,i,h,O)end;return O end;_.includes=function(O,T)local q=_.find(O,function(m)return m==T end)return q~=nil end;_.invoke=function(O,U,...)local d={}for h,i in _.iter(O)do _.push(d,n(U,i,...))end;return d end;_.map=function(O,J,p)local d={}for h,i in _.iter(O)do d[h]=n(J,p,i,h,O)end;return d end;_.partition=function(O,o,p)local d={{},{}}for h,i in _.iter(O)do if n(o,p,i,h,O)then _.push(d[1],i)else _.push(d[2],i)end end;return d end;_.pluck=function(O,V)local d={}for h,v in _.iter(O)do _.push(d,_.get(v,V))end;return d end;_.reduce=function(O,J,W,p)local W=W;for h,i in _.iter(O)do if _.isNil(W)then W=i else W=n(J,p,W,i,h,O)end end;return W end;_.reduceRight=function(O,J,W,p)local W=W;for h,i in _.iterRight(O)do if _.isNil(W)then W=i else W=n(J,p,W,i,h,O)end end;return W end;_.reject=function(O,o,p)return Q(O,o,p,true)end;_.sample=function(O,m)local m=m or 1;local d={}local X=_.keys(O)for f=1,m do local Y=X[_.random(1,#X)]_.push(d,_.get(O,{Y}))end;return#d==1 and d[1]or d end;_.size=function(O)local e=0;for h,i in _.iter(O)do e=e+1 end;return e end;_.some=function(O,o,p)for h,i in _.iter(O)do if n(o,p,i,h,O)then return true end end;return false end;_.sortBy=function(O,o,p)local d={}local Z=true;local a;for h,i in _.iter(O)do if Z then _.push(d,i)a=n(o,p,i,h,O)Z=false else local L=n(o,p,i,h,O)if _.lt(a,L)then table.insert(d,i)a=L else table.insert(d,#d,i)end end end;return d end;_.find=function(O,o,p)for h,i in _.iter(O)do if n(o,p,i,h,O)then return i end end end;_.findLast=function(O,o,p)for h,i in _.iterRight(O)do if n(o,p,i,h,O)then return i end end end;_.after=function(m,_)local f=1;return function(...)if _.gt(f,m)then return _(...)end;f=f+1 end end;_.ary=function(_,m)return function(...)if m==1 then return _(...)else local d=_.table(...)local C=_.take(d,m)return _(_.args(C))end end end;_.before=function(m,_)local f=1;local q;return function(...)if _.lte(f,m)then q=_(...)end;f=f+1;return q end end;_.modArgs=function(_,...)local a0={}for f,i in pairs(_.table(...))do if _.isFunction(i)then _.push(a0,i)elseif _.isTable(i)then for A,l in _.iter(i)do if _.isFunction(l)then _.push(a0,l)end end end end;return function(...)local N;for f,a1 in pairs(a0)do if _.isNil(N)then N=_.table(a1(...))else N=_.table(a1(_.args(N)))end end;if _.isNil(N)then return _(...)else return _(_.args(N))end end end;_.negate=function(_)return function(...)return not _(...)end end;_.once=function(_)local a2=false;local q;return function(...)if not a2 then q=_(...)a2=true end;return q end end;_.rearg=function(_,...)local a3={}for f,i in pairs(_.table(...))do if _.isNumber(i)then _.push(a3,i)elseif _.isTable(i)then for A,l in _.iter(i)do if _.isNumber(l)then _.push(a3,l)end end end end;return function(...)local N=_.table(...)local a4={}for f,H in pairs(a3)do _.push(a4,N[H])end;if#a3==0 then return _(...)else return _(_.args(a4))end end end;_.args=function(v)if _.isTable(v)then return table.unpack(v)else return table.unpack({v})end end;_.gt=function(v,a5,...)local v,a5=_.cast(v,a5)if _.isString(v)or _.isNumber(v)then return v>a5 elseif _.isFunction(v)then return v(...)>a5(...)end;return false end;_.gte=function(v,a5,...)if _.isNil(v)or _.isBoolean(v)then return v==a5 end;local v,a5=_.cast(v,a5)if _.isString(v)or _.isNumber(v)then return v>=a5 elseif _.isFunction(v)then return v(...)>=a5(...)elseif _.isTable(v)then return false end;return false end;_.isBoolean=function(v)return type(v)=='boolean'end;_.isEmpty=function(v)if _.isString(v)then return#v==0 elseif _.isTable(v)then local f=0;for h,i in _.iter(v)do f=f+1 end;return f==0 else return true end end;_.isFunction=function(v)return type(v)=='function'end;_.isNil=function(v)return type(v)=='nil'end;_.isNumber=function(v)return type(v)=='number'end;_.isString=function(v)return type(v)=='string'end;_.isTable=function(v)return type(v)=='table'end;_.lt=function(v,a5,...)local v,a5=_.cast(v,a5)if _.isString(v)or _.isNumber(v)then return v<a5 elseif _.isFunction(v)then return v(...)<a5(...)end;return false end;_.lte=function(v,a5,...)if _.isNil(v)or _.isBoolean(v)then return v==a5 end;local v,a5=_.cast(v,a5)if _.isString(v)or _.isNumber(v)then return v<=a5 elseif _.isFunction(v)then return v(...)<=a5(...)elseif _.isTable(v)then return false end;return false end;_.cast=function(F,G)if type(F)==type(G)then return F,G end;local a6;if _.isString(F)then a6=_.str elseif _.isBoolean(F)then a6=_.bool elseif _.isNumber(F)then a6=_.num elseif _.isFunction(F)then a6=_.func elseif _.isTable(F)then a6=_.table end;return F,a6(G)end;_.func=function(...)local d=_.table(...)return function()return _.args(d)end end;_.table=function(...)return table.pack(...)end;_.bool=function(v,...)local a7=false;if _.isString(v)then a7=#v>0 elseif _.isBoolean(v)then a7=v elseif _.isNumber(v)then a7=v~=0 elseif _.isFunction(v)then a7=_.bool(v(...))end;return a7 end;_.num=function(v,...)local a8=0;if _.isString(v)then ok=pcall(function()a8=v+0 end)if not ok then a8=math.huge end elseif _.isBoolean(v)then a8=v and 1 or 0 elseif _.isNumber(v)then a8=v elseif _.isFunction(v)then a8=_.num(v(...))end;return a8 end;local a9=function(i)return'"'..i..'"'end;_.str=function(v,...)local aa=''if _.isString(v)then aa=v elseif _.isBoolean(v)then aa=v and'true'or'false'elseif _.isNil(v)then aa='nil'elseif _.isNumber(v)then aa=v..''elseif _.isFunction(v)then aa=_.str(v(...))elseif _.isTable(v)then aa='{'for h,i in pairs(v)do i=_.isString(i)and a9(i)or _.str(i,...)if _.isNumber(h)then aa=aa..i..', 'else aa=aa..'['..a9(h)..']='..i..', 'end end;aa=aa:sub(0,#aa-2)..'}'end;return aa end;_.inRange=function(m,s,w)local ab=_.isNil(w)and 0 or s or 0;local ac=_.isNil(w)and s or w or 1;return m>=ab and m<ac end;_.random=function(ad,ae,af)local ag=_.isNil(ae)and 0 or ad or 0;local ah=_.isNil(ae)and ad or ae or 1;math.randomseed(tonumber(tostring(os.time()):reverse():sub(1,6)))local L=math.random(ag,ah)if af then L=L+math.random()end;return L end;_.assign=function(ai,...)for H=1,select('#',...)do for h,i in pairs(select(H,...))do ai[h]=i end end;return ai end;_.get=function(ai,V,aj)if _.isTable(ai)then local v=ai;local e=1;while not _.isNil(V[e])do if not _.isTable(v)then return aj end;v=v[V[e]]e=e+1 end;return v or aj elseif _.isString(ai)then local H=V[1]return ai:sub(H,H)end end;_.has=function(ai,V)local ak=ai;local e=1;local al=true;while not _.isNil(V[e])do ak=ak[V[e]]if _.isNil(ak)then al=false;break end;e=e+1 end;return al end;_.findKey=function(ai,o,p)for h,i in _.iter(ai)do if n(o,p,i,h,ai)then return h end end end;_.findLastKey=function(ai,o,p)for h,i in _.iterRight(ai)do if n(o,p,i,h,ai)then return h end end end;_.functions=function(ai)local d={}for h,i in _.iter(ai)do if _.isFunction(i)then _.push(d,h)end end;return d end;_.invert=function(ai,am)local d={}for h,i in _.iter(ai)do if am and not _.isNil(d[i])then d[i]={d[i]}_.push(d[i],h)else d[i]=h end end;return d end;local an=function(O,ao)local ap={}for h,i in pairs(O)do table.insert(ap,h)end;if ao then table.sort(ap,_.gt)else table.sort(ap,_.lt)end;return ap end;_.keys=function(ai)if _.isTable(ai)then return an(ai)elseif _.isString(ai)then local X={}for f=1,#ai do X[f]=f end;return X end end;_.pairs=function(ai)local d={}for h,i in _.iter(ai)do _.push(d,{h,i})end;return d end;_.result=function(ai,V,aj,...)local q=_.get(ai,V,aj)if _.isFunction(q)then return q(...)else return q end end;_.values=function(ai)local d={}for h,i in _.iter(ai)do _.push(d,i)end;return d end;_.constant=function(v)return _.func(v)end;_.identity=function(...)return...end;local aq=function(table,ao)local ap=an(table,ao)local f=0;return function()if _.lt(f,#ap)then f=f+1;local P=ap[f]return P,table[P]end end end;_.iter=function(v)if _.isString(v)then local f=0;return function()if _.lt(f,#v)then f=f+1;local e=v:sub(f,f)return f,e end end elseif _.isTable(v)then return aq(v)else return function()end end end;_.iterRight=function(v)if _.isString(v)then local f=#v+1;return function()if _.gt(f,1)then f=f-1;local e=v:sub(f,f)return f,e end end elseif _.isTable(v)then return aq(v,true)else return function()end end end;_.noop=function(...)return nil end;_.print=function(...)local d=_.table(...)for f,i in pairs(d)do d[f]=_.str(d[f])end;return print(_.args(d))end;_.range=function(s,...)local s=s;local N=_.table(...)local F,G,e;if#N==0 then F=1;G=s;e=1 else F=s;G=N[1]e=N[2]or 1 end;local d={}for f=F,G,e do _.push(d,f)end;return d end;return _
